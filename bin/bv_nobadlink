#! /usr/bin/env python2

import os, sys

def nobadlink( dir ):
    files = os.listdir( dir )
    for f in files:
        f = os.path.join( dir, f )
        if os.path.isdir( f ):
            try:
                nobadlink( f )
            except:
                pass
        elif os.path.islink( f ) and not os.path.exists( f ):
            print 'rm', f
            try:
                os.unlink( f )
            except Exception,e:
                print e


args = [ '.' ]
if len( sys.argv ) > 1:
    args = sys.argv[1:]

for dir in args:
    nobadlink( dir )
