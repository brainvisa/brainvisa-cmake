
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>bv_env &#8212; BrainVisa-Cmake 5.1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Testing and monitoring infrastructure" href="testing_monitoring.html" />
    <link rel="prev" title="bv_maker" href="bv_maker.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="testing_monitoring.html" title="Testing and monitoring infrastructure"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="bv_maker.html" title="bv_maker"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">BrainVisa-Cmake 5.1.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">bv_env</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="bv-env">
<h1>bv_env<a class="headerlink" href="#bv-env" title="Permalink to this headline">¶</a></h1>
<section id="bv-env-program">
<h2>bv_env program<a class="headerlink" href="#bv-env-program" title="Permalink to this headline">¶</a></h2>
<p>The <strong>bv_env</strong> program sets up paths to run all programs from a build tree or binary package installation of software built or installed via the <em>brainvisa-cmake</em> environment.</p>
<p>It sets basically <code class="docutils literal notranslate"><span class="pre">PATH</span></code>, <code class="docutils literal notranslate"><span class="pre">LD_LIBRARY_PATH</span></code>, <code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code> and <code class="docutils literal notranslate"><span class="pre">BRAINVISA_SHARE</span></code> environment variables, and saves their previous values in <code class="docutils literal notranslate"><span class="pre">BRAINVISA_UNENV_*</span></code> variables.</p>
<p>When run with no arguments, <code class="docutils literal notranslate"><span class="pre">bv_env</span></code> just prints the environment it would set.</p>
<p>When run with arguments, <code class="docutils literal notranslate"><span class="pre">bv_env</span></code> will run the commandline specified as arguments, in the bv_env environment.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>/home/myself/brainvisa_install/bin/bv_env anatomist /home/myself/data/mri.nii /home/myself/data/brain_mesh.gii
</pre></div>
</div>
<p>The environment is set only duing the command execution time, it does not modify shell variables from the calling program or shell.</p>
<p>The program is relocatable, this means that if you move the install tree after it is installed, bv_env will find out from where it is run and adapt, so it will still be valid.</p>
</section>
<section id="bv-env-sh-bv-env-csh-bv-env-bat-scripts">
<h2>bv_env.sh, bv_env.csh, bv_env.bat scripts<a class="headerlink" href="#bv-env-sh-bv-env-csh-bv-env-bat-scripts" title="Permalink to this headline">¶</a></h2>
<p>These scripts do the same as the bv_env program, except that they do not run a program on-the-fly, but change the calling shell environment variables. As it depends on the shell type used, there are several scripts for <em>sh/bash</em>, <em>csh/tcsh</em>, or windows <em>DOS</em> shells.</p>
<p>We have to admit that currently we only use <em>bash</em> shells and the other scripts are mostly untested.</p>
<p>In Unix shells (sh, bash, csh, tcsh), to actually modify the running environment, the scripts have to be <em>sourced</em>, not just run. Ex:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>. /home/myself/brainvisa_install/bin/bv_env.sh
</pre></div>
</div>
<p>or:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span> /home/myself/brainvisa_install/bin/bv_env.sh
</pre></div>
</div>
<p>will modify the calling shell, whereas:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>/home/myself/brainvisa_install/bin/bv_env.sh
</pre></div>
</div>
<p>will just appear to no nothing (it will modify variables internally during the script execution, but the calling shell will not be modified).</p>
<p>The programs are relocatable, this means that if you move the install tree after it is installed, <code class="docutils literal notranslate"><span class="pre">bv_env.*</span></code> scripts will find out from where it is run and adapt, so it will still be valid.</p>
<p>However to find out where they are run from, the scripts need to access the shell commands history, so the above commands will work in an interactive shell, but not from within a script or <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code> configuration script.</p>
<p>To overcome this problem, she <code class="docutils literal notranslate"><span class="pre">bv_env.sh</span></code> script can be passed an argument, which is the build / install directory location:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>. /home/myself/brainvisa_install/bin/bv_env.sh /home/myself/brainvisa_install
</pre></div>
</div>
</section>
<section id="bv-unenv">
<h2>bv_unenv<a class="headerlink" href="#bv-unenv" title="Permalink to this headline">¶</a></h2>
<p>If you need to run an “external” program, a program not part of the BrainVisa package, from a program within the BrainVisa environment, it may cause environment and libraries conflict problems, because BV programs need some libraries installed within the installation directory and environment, but “external” programs need the system versions.</p>
<p>When running such a program, it is possible to “undo” the environment setup of <em>bv_env</em>, using the <strong>bv_unenv</strong> program.</p>
<p>It otherwise works the same way.</p>
<p>The <strong>bv_unenv.sh</strong> script is the equivalent to undo <em>bv_env.sh</em> script.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">bv_env</a><ul>
<li><a class="reference internal" href="#bv-env-program">bv_env program</a></li>
<li><a class="reference internal" href="#bv-env-sh-bv-env-csh-bv-env-bat-scripts">bv_env.sh, bv_env.csh, bv_env.bat scripts</a></li>
<li><a class="reference internal" href="#bv-unenv">bv_unenv</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="bv_maker.html"
                        title="previous chapter">bv_maker</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="testing_monitoring.html"
                        title="next chapter">Testing and monitoring infrastructure</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/bv_env.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="testing_monitoring.html" title="Testing and monitoring infrastructure"
             >next</a> |</li>
        <li class="right" >
          <a href="bv_maker.html" title="bv_maker"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">BrainVisa-Cmake 5.1.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">bv_env</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2021, CEA.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.1.1.
    </div>
  </body>
</html>